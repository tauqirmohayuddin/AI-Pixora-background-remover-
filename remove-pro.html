<script>
const removeBtn=document.getElementById("remove-btn");
const fileInput=document.getElementById("file-input");
const loader=document.getElementById("loader");
const statusDiv=document.getElementById("status");
const resultImg=document.getElementById("result-img");
const downloadBtn=document.getElementById("download");

const NETLIFY_URL="https://ai-pixora-pro.netlify.app/.netlify/functions/remove-bg";

removeBtn.onclick=async()=>{
  if(!fileInput.files.length){
    statusDiv.textContent="Please select an image first.";
    return;
  }

  const file=fileInput.files[0];
  statusDiv.textContent="Uploading and processing...";
  loader.style.display="block";
  resultImg.style.display="none";
  downloadBtn.style.display="none";
  removeBtn.disabled=true;

  try{
    const fd=new FormData();
    fd.append("image_file",file);
    fd.append("size","auto");

    const res=await fetch(NETLIFY_URL,{method:"POST",body:fd});
    if(!res.ok){
      const txt=await res.text();
      console.error("Error:",txt);
      statusDiv.textContent="❌ Error "+res.status;
      return;
    }

    const blob=await res.blob();
    const url=URL.createObjectURL(blob);
    resultImg.src=url;
    resultImg.style.display="block";
    downloadBtn.href=url;
    downloadBtn.style.display="inline-block";
    statusDiv.textContent="✅ Background removed successfully!";
  }catch(err){
    console.error(err);
    statusDiv.textContent="⚠️ Error: "+err.message;
  }finally{
    loader.style.display="none";
    removeBtn.disabled=false;
  }
}
</script>


---
